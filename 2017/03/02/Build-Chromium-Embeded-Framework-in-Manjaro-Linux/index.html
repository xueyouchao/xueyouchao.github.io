<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Build Chromium-Embeded-Framework-in-Manjaro-Linux | Youchao's Programming Cafe</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Build Chromium-Embeded-Framework-in-Manjaro-Linux</h1><a id="logo" href="/.">Youchao's Programming Cafe</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/resume.pdf"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Build Chromium-Embeded-Framework-in-Manjaro-Linux</h1><div class="post-meta">Mar 2, 2017<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="2017/03/02/Build-Chromium-Embeded-Framework-in-Manjaro-Linux/" href="/2017/03/02/Build-Chromium-Embeded-Framework-in-Manjaro-Linux/#disqus_thread" class="disqus-comment-count"></a><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">Contents</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#different-approaches-to-integrate-a-webbrowserwebview-into-your-desktop-applications."><span class="toc-number">1.</span> <span class="toc-text">Different Approaches to Integrate a WebBrowser/WebView into Your Desktop Applications.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#building-cef-on-manjaro-linux"><span class="toc-number">2.</span> <span class="toc-text">Building CEF on Manjaro Linux</span></a></li></ol></div></div><div class="post-content"><h3 id="different-approaches-to-integrate-a-webbrowserwebview-into-your-desktop-applications.">Different Approaches to Integrate a WebBrowser/WebView into Your Desktop Applications.</h3>
<ul>
<li><p>Easy 3D Render To Texture Approach<br>
<a href="http://www.awesomium.com" target="_blank" rel="external">Awesomium</a>(base on Webkit) - this project started from Ogre3d showcase forum back in 2009 when I was still in school. Then it said goodbye to Ogre community and went commercial. It still reminds me the happy time I was building <a href="http://youchaosdevelopment.blogspot.com/2009/02/world-of-champloo.html" target="_blank" rel="external">games and editors</a> using a C++ game engine(No offense, it feels better to write C++ than drag and drop Unity3D script even that’s a much easier way.). Ogre3D - a great game engine that teaches me Design Pattern and many things for software architecture. I would definitely recommend <a href="https://www.amazon.com/Engine-Architecture-Second-Jason-Gregory/dp/1466560010" target="_blank" rel="external">“Game Engine Architecture”</a> book to anyone who is interested on understanding Ogre3D and a proper game engine architecture.<br>
I gave a try today on Awesomium, it still works but the problem I found is that for some HTML5 featured site, it doesn’t work and I got a message asking me to upgrade my browser. I guess it’s because the project hasn’t been updated for 2 years and the underlying webkit support maybe outdated.</p></li>
<li><p>In visual studio , drag and drop a .net webview UI component on your c# project and you have it. But who wants a webview with IE core?</p></li>
<li><p>Integrate one of the major browser core into your desktop application. (Firefox Gecko, Chromium Blink, Safari Webkit or IE Trident etc.) Among those using Google Chromium based browser became a very popular solution. You can find successful example such as <a href="https://crosswalk-project.org/documentation/about/demos.html" target="_blank" rel="external">Crosswalk</a> which not only brings the chromium browser/webview to desktop but also mobile platform. Other famous ones include Electron and NW.js which did great job to bring Chromium to desktop. Another popular solution came out for a few years is CEF(chromium embeded framework). I have seen many html5 UI style desktop applicaiton which uses this framework such as <a href="https://github.com/netease-youdao/hex" target="_blank" rel="external">HEX</a>.</p></li>
</ul>
<h3 id="building-cef-on-manjaro-linux">Building CEF on Manjaro Linux</h3>
<p>Since my purpose is to integrate CEF into my application, I choose to use the CEF binaries directly. Make sure to download the latest binaries from <a href="http://opensource.spotify.com/cefbuilds/index.html" target="_blank" rel="external">here</a>. (I used cef_binary_3.2924.1575.g97389a9, an early version will give you a annoying run time error about libgcrypt11.so not found.)</p>
<p>The building steps are cleared in the CMakelists.txt. On linux, you can choose ninja or Gnu Make to build the examples.</p>
<ul>
<li><p>Make sure to install CMake 2.8.12.1 or newer version; install ninja build tools.<br>
On ArchLinux, run <em>sudo pacman -S ninja</em> and <em>sudo pacman -S cmake</em></p></li>
<li><p>Run the following commands<br>
&gt; cd path/to/cef_binary<br>
&gt; mkdir build &amp;&amp; cd build<br>
&gt; cmake -G “Ninja” -DCMAKE_BUILD_TYPE=Debug ..<br>
&gt; ninja cefclient cefsimple</p></li>
<li><p>Then I get the following error: ../cefclient/browser/client_types.h:12:21: fatal error gtk/gtk.h: No such file or directory<br>
<img src="/images/gtkerror.png"></p></li>
</ul>
<p>What is going on? If you read the comments in CmakeLists.txt, ArchLinux based family was not in the supported distribution list and there are three required packages: build-essential, libgtk2.0-dev, libgtkglext1-dev. I can’t find those packages in Pacman repos, do I really need to install those? Lets’s check gtk/gtk.h path by running <em>sudo pacman -Ql gtk2</em> and <em>pkg-config –cflags –libs gtk+-2.0</em>. It’s in my /usr/include folder. It seems GTK2.0+- and GTK3.0+- comes with manjaro distro.(Manjaro is an Arch Linux with customized desktop.) So it seems cmake can not find the GTK path. Rgrep(emacs command) “gtk+-2.0” and I found this line in CEF CmakeLists.txt file:</p>
<pre><code>FIND_LINUX_LIBRARIES(&quot;gmodule-2.0 gtk+-2.0 gthread-2.0 gtk+-unix-print-2.0 gtkglext-1.0&quot;)</code></pre>
<p>This macro is defined in cef_macros.cmake:142 for reading pkg-config into cmake. Change this one line in CMakeLists.txt into multiple lines, passing libraries’ names one by one.</p>
<pre><code>  FIND_LINUX_LIBRARIES(&quot;gmodule-2.0&quot;)
  FIND_LINUX_LIBRARIES(&quot;gtk+-2.0&quot;)
  FIND_LINUX_LIBRARIES(&quot;gthread-2.0&quot;)
  FIND_LINUX_LIBRARIES(&quot;gtk+-unix-print-2.0&quot;)
  FIND_LINUX_LIBRARIES(&quot;gtkglext-1.0&quot;)</code></pre>
<p>Compile it again, get error gtk/gtkgl.h not found. <code>sudo pacman -S gtkglext</code> Done. So during the compiling step the only package you need to install in Manjaro Linux is gtkglext.</p>
<ul>
<li>Run the following command after the compiling finished</li>
</ul>
<p>EXE=“/path/to/cef_binary/build/cefclient/Debug/chrome-sandbox” &amp;&amp; sudo – chown root:root $EXE &amp;&amp; sudo – chmod 7455 $EXE cd /path/to/cefclient<br>
./cefclient<br>
You will see a simple chrome embeded desktop application runs:<br>
<img src="/images/cef.png"></p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="https://xueyouchao.github.io/2017/03/02/Build-Chromium-Embeded-Framework-in-Manjaro-Linux/" data-id="cj1vq2r8o00050fnusd5a7wfp" class="article-share-link">Share</a><div class="tags"><a href="/tags/c/">c++</a></div><div class="post-nav"><a href="/2017/02/26/Lock-Free-Ring-Queue-for-Multi-producer-and-Multi-consumer/" class="next">Lock Free Ring Queue for Multi-producer and Multi-consumer</a></div><div id="disqus_thread"><script>var disqus_shortname = 'xueyouchao-github-io';
var disqus_identifier = '2017/03/02/Build-Chromium-Embeded-Framework-in-Manjaro-Linux/';
var disqus_title = 'Build Chromium-Embeded-Framework-in-Manjaro-Linux';
var disqus_url = 'https://xueyouchao.github.io/2017/03/02/Build-Chromium-Embeded-Framework-in-Manjaro-Linux/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//xueyouchao-github-io.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://xueyouchao.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Hashing/" style="font-size: 15px;">Hashing</a> <a href="/tags/C-11/" style="font-size: 15px;">C++11</a> <a href="/tags/c/" style="font-size: 15px;">c++</a> <a href="/tags/c-14/" style="font-size: 15px;">c++14</a> <a href="/tags/Emacs/" style="font-size: 15px;">Emacs</a> <a href="/tags/Markdown/" style="font-size: 15px;">Markdown</a> <a href="/tags/lock-free/" style="font-size: 15px;">lock-free</a> <a href="/tags/atomics/" style="font-size: 15px;">atomics</a> <a href="/tags/Dpdk/" style="font-size: 15px;">Dpdk</a> <a href="/tags/LMax-Disruptor/" style="font-size: 15px;">LMax Disruptor</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/03/02/Build-Chromium-Embeded-Framework-in-Manjaro-Linux/">Build Chromium-Embeded-Framework-in-Manjaro-Linux</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/26/Lock-Free-Ring-Queue-for-Multi-producer-and-Multi-consumer/">Lock Free Ring Queue for Multi-producer and Multi-consumer</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/22/Journey-of-Emacs/">Journey of Emacs</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/16/CompileTimeString/">Compile Time String Hashing</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//xueyouchao-github-io.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://youchaosdevelopment.blogspot.com/2009/03/few-videos-show-my-editor.html" title="Youchao's Old Blog" target="_blank">Youchao's Old Blog</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Youchao's Programming Cafe.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/highlight.js/9.2.0/styles/solarized-dark.min.css"><link rel="stylesheet" type="text/css" href="/css/codehighlight.css?v=0.0.0"><script type="text/javascript" src="//cdn.bootcss.com/highlight.js/9.2.0/highlight.min.js"></script><script type="text/javascript" src="/js/highlightcode.js?v=0.0.0"></script></div></body></html>